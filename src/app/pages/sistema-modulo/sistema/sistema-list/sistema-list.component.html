<div class="card">
  <div class="flex justify-content-between align-items-center mb-4">
    <h1 class="text-2xl font-semibold text-900">Administración de Sistemas</h1>
    <button pButton pRipple 
            icon="pi pi-plus" 
            label="Nuevo Sistema" 
            class="p-button-sm"
            (click)="showNewDialog()"></button>
  </div>

  <div class="mb-4">
    <span class="p-input-icon-left w-full">
      <i class="pi pi-search"></i>
      <input pInputText type="text" 
             [(ngModel)]="filterValue"
             (input)="onSearch(filterValue)"
             placeholder="Buscar sistemas..." 
             class="w-full" />
    </span>
  </div>

  <app-dynamic-table [config]="tableConfig" 
                     [data]="sistemas"
                     [loading]="loading"
                     (action)="onTableAction($event)">
    <!-- Template para ícono -->
    <ng-template #iconTemplate let-sistema>
      <i class="pi text-xl" [ngClass]="sistema.icono || 'pi-box'"></i>
    </ng-template>
    
    <!-- Template para estado -->
    <ng-template #statusTemplate let-sistema>
      <app-status-tag [value]="sistema.activo" 
                     trueLabel="Activo" 
                     falseLabel="Inactivo"
                     trueSeverity="success" 
                     falseSeverity="danger"
                     icon="pi pi-circle-fill">
      </app-status-tag>
    </ng-template>
  </app-dynamic-table>
</div>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
<p-toast position="top-right"></p-toast>